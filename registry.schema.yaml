$id: https://grafana.github.io/k6registry/registry.schema.json
$ref: "#/$defs/registry"
$defs:
  registry:
    description: |
      k6 Extension Registry.

      The k6 extension registry contains the most important properties of registered extensions.
    type: object
    properties:
      extensions:
        description: |
          An array containing the registration data of the k6 golang extensions.
        type: array
        items:
          $ref: "#/$defs/extension"
    additionalProperties: false
  extension:
    type: object
    description: |
      Properties of the registered k6 extension.

      Only those properties of the extensions are registered, which either cannot be detected automatically, or delegation to the extension is not allowed.

      Properties that are available using the repository manager API are intentionally not registered.

      The string like properties that are included in the generated Grafana documentation are intentionally not accessed via the API of the repository manager. It is not allowed to inject arbitrary text into the Grafana documentation site without approval. Therefore, these properties are registered (eg `description`)
    properties:
      module:
        type: string
        description: |
          The extension's go module path.

          This is the unique identifier of the extension.
          More info about module paths: https://go.dev/ref/mod#module-path

          The extension has no name property, the module path or part of it can be used as the extension name. For example, using the first two elements of the module path after the host name, the name `grafana/xk6-dashboard` can be formed from the module path `github.com/grafana/xk6-dashboard`. This is typically the repository owner name and the repository name in the repository manager.

          The extension has no URL property, a URL can be created from the module path that refers to the extension within the repository manager.
        examples:
          - github.com/grafana/xk6-dashboard
          - github.com/szkiba/xk6-top
      imports:
        type: array
        items:
          type: string
        description: |
          List of JavaScript import paths registered by the extension.

          Currently, paths must start with the prefix `k6/x/`.
          The extensions used by k6 scripts are automatically detected based on the values specified here, therefore it is important that the values used here are consistent with the values registered by the extension at runtime.
        examples:
          - ["k6/x/csv", "k6/x/csv/stream"]
          - ["k6/x/toml"]
      outputs:
        type: array
        items:
          type: string
        example:
        description: |
          List of output names registered by the extension.

          The extensions used by k6 scripts are automatically detected based on the values specified here, therefore it is important that the values used here are consistent with the values registered by the extension at runtime.
        examples:
          - ["dashboard"]
          - ["plugin"]
      description:
        type: string
        description: |
          Brief description of the extension.
    required:
      - module
      - description
    additionalProperties: false
